
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Metrics Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-hints/plugin-hints.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-codetabs/codetabs.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-theme-api/theme-api.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="readme.html" />
    
    
    <link rel="prev" href="../measurements.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../introduction.html">
            
                <a href="../introduction.html">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../authentication.html">
            
                <a href="../authentication.html">
            
                    
                    Authentication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../response-errors.html">
            
                <a href="../response-errors.html">
            
                    
                    Response Codes & Errors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../measurements.html">
            
                <a href="../measurements.html">
            
                    
                    Measurements
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../measurements.html">
            
                <a href="../measurements.html#create-a-measurement">
            
                    
                    Create Measurement
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../measurements.html">
            
                <a href="../measurements.html#retrieve-a-measurement">
            
                    
                    Retrieve Measurement
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.5" data-path="readme.html">
            
                <a href="readme.html">
            
                    
                    Metrics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="readme.html">
            
                <a href="readme.html#create-a-metric">
            
                    
                    Create Metric
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="readme.html">
            
                <a href="readme.html#update-a-metric">
            
                    
                    Update Metric
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="readme.html">
            
                <a href="readme.html#delete-a-metric">
            
                    
                    Delete Metric
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../metric-attributes.html">
            
                <a href="../metric-attributes.html">
            
                    
                    Metric Attributes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../pagination.html">
            
                <a href="../pagination.html">
            
                    
                    Pagination
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../">
            
                <a href="../">
            
                    
                    Formatting Examples
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Metrics</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="metrics"><a name="metrics" class="plugin-anchor" href="#metrics"><i class="fa fa-link" aria-hidden="true"></i></a>Metrics</h1>
<p>Metrics represent the individual time-series sent to the AppOptics service. Each measurement sent to AppOptics is associated with a Metric.</p>
<h2 id="metric-properties"><a name="metric-properties" class="plugin-anchor" href="#metric-properties"><i class="fa fa-link" aria-hidden="true"></i></a>Metric Properties</h2>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>Type of metric to create (gauge, counter, or composite).</td>
</tr>
<tr>
<td>display_name<br><code>optional</code></td>
<td>Name which will be used for the metric when viewing the Metrics website.</td>
</tr>
<tr>
<td>description<br><code>optional</code></td>
<td>Text that can be used to explain precisely what the gauge is measuring.</td>
</tr>
<tr>
<td>period<br><code>optional</code></td>
<td>Number of seconds that is the standard reporting period of the metric. Setting the period enables Metrics to detect abnormal interruptions in reporting and aids in analytics. For gauge metrics that have service-side aggregation enabled, this option will define the period that aggregation occurs on.</td>
</tr>
<tr>
<td>attributes<br><code>optional</code></td>
<td>The attributes hash configures specific components of a metric&apos;s visualization. A list of metric attributes can be found in the <a href="#attributes">Metric Attributes table</a>.</td>
</tr>
<tr>
<td>composite<br><code>optional</code></td>
<td>The composite definition. Only used when type is composite.</td>
</tr>
</tbody>
</table>
<div class="api-method"><div class="api-method-definition"><h2 id="create-a-metric"><a name="create-a-metric" class="plugin-anchor" href="#create-a-metric"><i class="fa fa-link" aria-hidden="true"></i></a>Create a Metric</h2>
<p>Metrics can be created without submitting a measurement value using a PUT to the <code>/metrics</code> endpoint.
Metrics are automatically created by POSTing a measurement for the first time. See <a href="#create-a-measurement">Create a Measurement</a>.</p>
</div><div class="api-method-code"><div class="api-method-sample" data-lang="bash" data-name="Bash"><pre><code class="lang-bash">curl \
-u <span class="hljs-variable">$APPOPTICS_TOKEN</span>: \
-H <span class="hljs-string">&quot;Content-Type: application/json&quot;</span> \
<span class="hljs-_">-d</span> <span class="hljs-string">&apos;{
  &quot;type&quot;: &quot;gauge&quot;,
  &quot;name&quot;: &quot;cpu.percent.used&quot;,
  &quot;period&quot;: 60,
  &quot;attributes&quot;: {
    &quot;summarize_function&quot;: &quot;sum&quot;,
    &quot;color&quot;: &quot;#FFFFFF&quot;
  },
  &quot;tags&quot;: {
    &quot;environment&quot;: &quot;prod&quot;,
    &quot;service&quot;: &quot;api&quot;
  }
}&apos;</span> \
-X PUT \
<span class="hljs-string">&apos;https://api.appoptics.com/v1/metrics/cpu.percent.used&apos;</span>
</code></pre>
</div><div class="api-method-sample" data-lang="ruby" data-name="Ruby"><pre><code class="lang-ruby">Not yet available
</code></pre>
</div><div class="api-method-sample" data-lang="python" data-name="Python"><pre><code class="lang-python">Not yet available
</code></pre>
</div></div></div>

<div class="api-method"><div class="api-method-definition"><h2 id="update-a-metric"><a name="update-a-metric" class="plugin-anchor" href="#update-a-metric"><i class="fa fa-link" aria-hidden="true"></i></a>Update a Metric</h2>
<h3 id="http-request"><a name="http-request" class="plugin-anchor" href="#http-request"><i class="fa fa-link" aria-hidden="true"></i></a>HTTP Request</h3>
<p><code>PUT https://api.appoptics.com/v1/metrics</code></p>
<p>Set the <code>period</code> and <code>display_min</code> for metrics <code>cpu</code>, <code>servers</code> and <code>reqs</code>:</p>
</div><div class="api-method-code"><div class="api-method-sample" data-lang="bash" data-name="Bash"><pre><code class="lang-bash">curl \
  -u <span class="hljs-variable">$APPOPTICS_TOKEN</span>: \
  <span class="hljs-_">-d</span> <span class="hljs-string">&apos;names%5B%5D=cpu&amp;names%5B%5D=servers&amp;names%5B%5D=reqs&amp;period=60&amp;display_min=0&apos;</span> \
  -X PUT \
  <span class="hljs-string">&apos;https://api.appoptics.com/v1/metrics&apos;</span>
</code></pre>
</div><div class="api-method-sample" data-lang="ruby" data-name="Ruby"><pre><code class="lang-ruby"><span class="hljs-keyword">require</span> <span class="hljs-string">&quot;appoptics/metrics&quot;</span>
<span class="hljs-symbol">AppOptics:</span><span class="hljs-symbol">:Metrics</span>.authenticate &lt;token&gt;
<span class="hljs-symbol">AppOptics:</span><span class="hljs-symbol">:Metrics</span>.update_metrics <span class="hljs-symbol">names:</span> [<span class="hljs-string">&quot;cpu&quot;</span>, <span class="hljs-string">&quot;servers&quot;</span>, <span class="hljs-string">&quot;reqs&quot;</span>], <span class="hljs-symbol">period:</span> <span class="hljs-number">60</span>, <span class="hljs-symbol">display_min:</span> <span class="hljs-number">0</span>
</code></pre>
</div><div class="api-method-sample" data-lang="python" data-name="Python"><pre><code class="lang-python"><span class="hljs-keyword">import</span> librato
api = librato.connect(&lt;user&gt;, &lt;token&gt;)
<span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> [<span class="hljs-string">&apos;cpu&apos;</span>, <span class="hljs-string">&apos;servers&apos;</span>, <span class="hljs-string">&apos;reqs&apos;</span>]:
  gauge = api.get(name)
  attrs[<span class="hljs-string">&apos;period&apos;</span>] = <span class="hljs-string">&apos;60&apos;</span>
  attrs[<span class="hljs-string">&apos;display_min&apos;</span>] = <span class="hljs-string">&apos;0&apos;</span>
  api.update(name, attributes=attrs)
</code></pre>
</div></div></div>

<div class="api-method"><div class="api-method-definition"><h2 id="delete-a-metric"><a name="delete-a-metric" class="plugin-anchor" href="#delete-a-metric"><i class="fa fa-link" aria-hidden="true"></i></a>Delete a Metric</h2>
<p>Set the <code>display_units_short</code> for all metrics that end with <code>.time</code>:</p>
</div><div class="api-method-code"><div class="api-method-sample" data-lang="bash" data-name="Bash"><pre><code class="lang-bash">curl \
  -u <span class="hljs-variable">$APPOPTICS_TOKEN</span>: \
  <span class="hljs-_">-d</span> <span class="hljs-string">&apos;names=*.time&amp;display_units_short=ms&apos;</span> \
  -X PUT \
  <span class="hljs-string">&apos;https://api.appoptics.com/v1/metrics&apos;</span>
</code></pre>
</div><div class="api-method-sample" data-lang="ruby" data-name="Ruby"><pre><code class="lang-ruby"><span class="hljs-keyword">require</span> <span class="hljs-string">&quot;appoptics/metrics&quot;</span>
<span class="hljs-symbol">AppOptics:</span><span class="hljs-symbol">:Metrics</span>.authenticate &lt;token&gt;
<span class="hljs-symbol">AppOptics:</span><span class="hljs-symbol">:Metrics</span>.update_metrics <span class="hljs-symbol">names:</span> [<span class="hljs-string">&quot;*.time&quot;</span>] , <span class="hljs-symbol">display_units_short:</span> <span class="hljs-string">&quot;ms&quot;</span>
</code></pre>
</div><div class="api-method-sample" data-lang="python" data-name="Python"><pre><code class="lang-python">Not yet available
</code></pre>
</div></div></div>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            

        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Metrics","level":"1.5","depth":1,"next":{"title":"Create Metric","level":"1.5.1","depth":2,"anchor":"#create-a-metric","path":"metrics/readme.md","ref":"metrics/readme.md#create-a-metric","articles":[]},"previous":{"title":"Retrieve Measurement","level":"1.4.2","depth":2,"anchor":"#retrieve-a-measurement","path":"measurements.md","ref":"measurements.md#retrieve-a-measurement","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["theme-api","anchors","hints","expandable-chapters","codetabs","livereload"],"pluginsConfig":{"livereload":{},"search":{},"codetabs":{},"hints":{"danger":"fa fa-exclamation-circle","info":"fa fa-info-circle","tip":"fa fa-mortar-board","working":"fa fa-wrench"},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"theme-api":{"languages":[],"split":true,"theme":"dark"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{},"expandable-chapters":{}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"metrics/readme.md","mtime":"2018-04-20T03:49:24.781Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-04-20T05:18:08.168Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-codetabs/codetabs.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-theme-api/theme-api.js"></script>
        
    

    </body>
</html>

